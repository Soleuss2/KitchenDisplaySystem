@model SelfOrderingSystemKiosk.Areas.Customer.Models.Order
@{
    Layout = "~/Areas/Customer/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Order Status";
}

<link rel="stylesheet" href="~/css/kiosk.css" />
<link rel="stylesheet" href="~/css/Menu.css" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

<div class="container order-status-container">
    <div class="order-left">
        <h3>Order Details</h3>
        <ul class="order-items">
            @foreach (var item in Model.Items)
            {
                <li>
                    <div>
                        <p>@item.ItemName</p>
                        <p>Qty: @item.Quantity</p>
                        <p>Price: ₱@item.Price</p>
                    </div>
                </li>
            }
        </ul>
        <p class="order-total">Total: ₱@Model.Total</p>
    </div>

    <div class="order-right">
        <h3>Order Status</h3>
        <ul class="status-list">
            <li class="status-item active" data-step="0">Order Received</li>
            <li class="status-item" data-step="1">Preparing</li>
            <li class="status-item" data-step="2">Cooking</li>
            <li class="status-item" data-step="3">Quality Check</li>
            <li class="status-item" data-step="4">Ready</li>
        </ul>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="orderCompleteModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Order Complete!</h5>
            </div>
            <div class="modal-body">
                <p>Your order is ready. What would you like to do next?</p>
            </div>
            <div class="modal-footer">
                <a href="/Order/StartNew" class="btn btn-primary">Order Again</a>
                <a href="/Order/BillOut" class="btn btn-secondary">End Session / Bill Out</a>
            </div>
        </div>
    </div>
</div>

<style>
    .order-status-container {
        display: flex;
        gap: 40px;
        padding: 30px;
    }

    .order-left {
        flex: 2;
        background: #fff;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    }

    .order-right {
        flex: 1;
        background: #fff;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    }

    .status-list {
        list-style: none;
        padding: 0;
    }

    .status-item {
        position: relative;
        padding-left: 30px;
        margin-bottom: 20px;
        font-weight: 500;
        color: #aaa;
    }

        .status-item.active {
            color: #28a745;
        }

        .status-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 3px;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #ccc;
        }

        .status-item.active::before {
            background: #28a745;
        }
</style>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    let statuses = document.querySelectorAll('.status-item');
    let currentStep = 0;

    // Simulate order progress every 3 seconds for testing
    let statusInterval = setInterval(() => {
        if(currentStep < statuses.length) {
            statuses[currentStep].classList.add('active');
            currentStep++;
        } else {
            clearInterval(statusInterval);
            let orderModal = new bootstrap.Modal(document.getElementById('orderCompleteModal'));
            orderModal.show();
        }
    }, 3000);
</script>
